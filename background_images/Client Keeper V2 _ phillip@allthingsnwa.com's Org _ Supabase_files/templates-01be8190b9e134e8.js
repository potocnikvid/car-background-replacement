(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5969],{89754:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/sql/templates",function(){return i(90715)}])},90715:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return q}});var r=i(52322),s=i(59491),n=i(96795),o=i.n(n),c=i(5632),l=i(62202),d=i(99959),a=i(36998),u=i(27570),p=i(87175),f=i(82955),h=i(74067),x=i(28020),j=i(2670),_=i(30789),m=i(7339),g=i(24413),v=i(75939),y=()=>{let e=(0,c.useRouter)(),{ref:t}=(0,d.UO)(),{profile:i}=(0,h.Un)(),{project:n}=(0,u.d2)(),[y]=o()(a.o,{type:"template"}),N=(0,j.W2)(),k=(0,g.B0)(),q=(0,d.Mk)(),w=(0,v.P)("sqlFolderOrganization"),b=(0,p.Xo)(s.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==i?void 0:i.id},subject:{id:null==i?void 0:i.id}}),E=async(r,s)=>{if(!t)return console.error("Project ref is required");if(!n)return console.error("Project is required");if(!i)return console.error("Profile is required");if(!b)return(0,l.ZP)("Your queries will not be saved as you do not have sufficient permissions");try{if(w){let o=(0,_.wI)({id:(0,f.k$)(),name:s,sql:r,owner_id:null==i?void 0:i.id,project_id:null==n?void 0:n.id});k.addSnippet({projectRef:t,snippet:o}),k.addNeedsSaving(o.id),e.push("/project/".concat(t,"/sql/").concat(o.id))}else{let t=(0,_.UA)({id:(0,f.k$)(),name:s,sql:r,owner_id:i.id,project_id:n.id});N.addSnippet(t,n.ref),N.addNeedsSaving(t.id),e.push("/project/".concat(n.ref,"/sql/").concat(t.id))}}catch(e){l.ZP.error("Failed to create new query: ".concat(e.message))}};return(0,r.jsx)("div",{className:"block h-full space-y-8 overflow-y-auto p-6",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h1",{className:"text-foreground mb-3 text-xl",children:"Scripts"}),(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"Quick scripts to run on your database."}),(0,r.jsxs)("p",{className:"text-foreground-light text-sm",children:["Click on any script to fill the query box, modify the script, then click",(0,r.jsx)("span",{className:"text-code",children:"Run"}),"."]})]}),(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 ",children:y.map(t=>(0,r.jsx)(m.Z,{title:t.title,description:t.description,sql:t.sql,onClick:(i,r)=>{E(i,r),x.Z.sendEvent({category:"scripts",action:"script_clicked",label:t.title},q,e)}},t.title))})]})})},N=i(67366);let k=()=>(0,r.jsx)(y,{});k.getLayout=e=>(0,r.jsx)(N.Z,{title:"SQL",children:e});var q=k}},function(e){e.O(0,[8421,538,8183,7385,6770,3844,63,8993,8395,3736,7148,7833,2168,2472,4830,9428,6640,5022,6998,8020,6,2888,9774,179],function(){return e(e.s=89754)}),_N_E=e.O()}]);